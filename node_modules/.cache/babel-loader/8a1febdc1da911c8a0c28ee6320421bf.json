{"ast":null,"code":"'use strict'; //first we import our dependencies…\n\nimport express from 'express';\n\nvar mongoose = require(\"mongoose\");\n\nvar bodyParser = require(\"body-parser\"); //var Comment = require(\"./comments\");\n//and create our instances\n\n\nvar app = express();\nvar router = express.Router(); //set our port to either a predetermined port number if you have set \n//it up, or 3001\n\nvar port = process.env.API_PORT || 27017;\nmongoose.find('name', 'moi'); // db config\n\nmongoose.connect('mongodb://:@localhost:27017/mesclients');\nconsole.log(mongoose); //now we should configure the API to use bodyParser and look for \n//JSON data in the request body\n\napp.use(bodyParser.urlencoded({\n  extended: true\n}));\napp.use(bodyParser.json()); //To prevent errors from Cross Origin Resource Sharing, we will set \n//our headers to allow CORS with middleware like so:\n\napp.use(function (req, res, next) {\n  res.setHeader('Access-Control-Allow-Origin', '*');\n  res.setHeader('Access-Control-Allow-Credentials', 'true');\n  res.setHeader('Access-Control-Allow-Methods', 'GET,HEAD,OPTIONS,POST,PUT,DELETE');\n  res.setHeader('Access-Control-Allow-Headers', 'Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers'); //and remove cacheing so we get the most recent comments\n\n  res.setHeader('Cache-Control', 'no-cache');\n  next();\n}); //now we can set the route path & initialize the API\n\nrouter.get('/', function (req, res) {\n  res.json({\n    message: 'API Initialized!'\n  });\n}); //adding the /comments route to our /api router\n\nrouter.route('/comments') //retrieve all comments from the database\n.get(function (req, res) {\n  //looks at our Comment Schema\n  Comment.find(function (err, comments) {\n    if (err) res.send(err); //responds with a json object of our database comments.\n\n    res.json(comments);\n  });\n}); //Use our router configuration when we call /api\n\napp.use('/api', router); //starts the server and listens for requests\n\napp.listen(port, function () {\n  console.log(\"api running on port \".concat(port));\n});","map":{"version":3,"sources":["/Users/loryleticee/first-project/src/server.js"],"names":["express","mongoose","require","bodyParser","app","router","Router","port","process","env","API_PORT","find","connect","console","log","use","urlencoded","extended","json","req","res","next","setHeader","get","message","route","Comment","err","comments","send","listen"],"mappings":"AAAA,a,CACA;;AACA,OAAOA,OAAP,MAAoB,SAApB;;AACA,IAAIC,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAtB;;AACA,IAAIC,UAAU,GAAGD,OAAO,CAAC,aAAD,CAAxB,C,CACA;AACA;;;AACA,IAAIE,GAAG,GAAGJ,OAAO,EAAjB;AACA,IAAIK,MAAM,GAAGL,OAAO,CAACM,MAAR,EAAb,C,CACA;AACA;;AACA,IAAIC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,IAAwB,KAAnC;AACCT,QAAQ,CAACU,IAAT,CAAc,MAAd,EAAqB,KAArB,E,CACD;;AACAV,QAAQ,CAACW,OAAT,CAAiB,wCAAjB;AACAC,OAAO,CAACC,GAAR,CAAYb,QAAZ,E,CAEA;AACA;;AACAG,GAAG,CAACW,GAAJ,CAAQZ,UAAU,CAACa,UAAX,CAAsB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAtB,CAAR;AACAb,GAAG,CAACW,GAAJ,CAAQZ,UAAU,CAACe,IAAX,EAAR,E,CACA;AACA;;AACAd,GAAG,CAACW,GAAJ,CAAQ,UAASI,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AAChCD,EAAAA,GAAG,CAACE,SAAJ,CAAc,6BAAd,EAA6C,GAA7C;AACAF,EAAAA,GAAG,CAACE,SAAJ,CAAc,kCAAd,EAAkD,MAAlD;AACAF,EAAAA,GAAG,CAACE,SAAJ,CAAc,8BAAd,EAA8C,kCAA9C;AACAF,EAAAA,GAAG,CAACE,SAAJ,CAAc,8BAAd,EAA8C,4IAA9C,EAJgC,CAKjC;;AACCF,EAAAA,GAAG,CAACE,SAAJ,CAAc,eAAd,EAA+B,UAA/B;AACAD,EAAAA,IAAI;AACJ,CARD,E,CASA;;AACAhB,MAAM,CAACkB,GAAP,CAAW,GAAX,EAAgB,UAASJ,GAAT,EAAcC,GAAd,EAAmB;AAClCA,EAAAA,GAAG,CAACF,IAAJ,CAAS;AAAEM,IAAAA,OAAO,EAAE;AAAX,GAAT;AACA,CAFD,E,CAIA;;AACAnB,MAAM,CAACoB,KAAP,CAAa,WAAb,EACC;AADD,CAEGF,GAFH,CAEO,UAASJ,GAAT,EAAcC,GAAd,EAAmB;AACxB;AACAM,EAAAA,OAAO,CAACf,IAAR,CAAa,UAASgB,GAAT,EAAcC,QAAd,EAAwB;AACnC,QAAID,GAAJ,EACAP,GAAG,CAACS,IAAJ,CAASF,GAAT,EAFmC,CAGnC;;AACAP,IAAAA,GAAG,CAACF,IAAJ,CAASU,QAAT;AACD,GALD;AAMA,CAVF,E,CAcA;;AACAxB,GAAG,CAACW,GAAJ,CAAQ,MAAR,EAAgBV,MAAhB,E,CACA;;AACAD,GAAG,CAAC0B,MAAJ,CAAWvB,IAAX,EAAiB,YAAW;AAC3BM,EAAAA,OAAO,CAACC,GAAR,+BAAmCP,IAAnC;AACA,CAFD","sourcesContent":["'use strict'\n//first we import our dependencies…\nimport express from 'express';\nvar mongoose = require(\"mongoose\");\nvar bodyParser = require(\"body-parser\");\n//var Comment = require(\"./comments\");\n//and create our instances\nvar app = express();\nvar router = express.Router();\n//set our port to either a predetermined port number if you have set \n//it up, or 3001\nvar port = process.env.API_PORT || 27017;\n mongoose.find('name','moi');\n// db config\nmongoose.connect('mongodb://:@localhost:27017/mesclients');\nconsole.log(mongoose);\n\n//now we should configure the API to use bodyParser and look for \n//JSON data in the request body\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(bodyParser.json());\n//To prevent errors from Cross Origin Resource Sharing, we will set \n//our headers to allow CORS with middleware like so:\napp.use(function(req, res, next) {\n res.setHeader('Access-Control-Allow-Origin', '*');\n res.setHeader('Access-Control-Allow-Credentials', 'true');\n res.setHeader('Access-Control-Allow-Methods', 'GET,HEAD,OPTIONS,POST,PUT,DELETE');\n res.setHeader('Access-Control-Allow-Headers', 'Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers');\n//and remove cacheing so we get the most recent comments\n res.setHeader('Cache-Control', 'no-cache');\n next();\n});\n//now we can set the route path & initialize the API\nrouter.get('/', function(req, res) {\n res.json({ message: 'API Initialized!'});\n});\n\n//adding the /comments route to our /api router\nrouter.route('/comments')\n //retrieve all comments from the database\n  .get(function(req, res) {\n  //looks at our Comment Schema\n  Comment.find(function(err, comments) {\n    if (err)\n    res.send(err);\n    //responds with a json object of our database comments.\n    res.json(comments)\n  });\n })\n \n \n\n//Use our router configuration when we call /api\napp.use('/api', router);\n//starts the server and listens for requests\napp.listen(port, function() {\n console.log(`api running on port ${port}`);\n});"]},"metadata":{},"sourceType":"module"}